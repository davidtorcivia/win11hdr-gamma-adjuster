<Window x:Class="HDRGammaController.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:vm="clr-namespace:HDRGammaController.ViewModels"
        Title="HDR Gamma Controller" Height="0" Width="0"
        WindowStyle="None"
        ShowInTaskbar="False"
        Visibility="Hidden">



    <Grid>
        <tb:TaskbarIcon x:Name="MyNotifyIcon"
                        ToolTipText="HDR Gamma Controller"
                        MenuActivation="RightClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu ItemsSource="{Binding TrayItems}">
                    <ContextMenu.ItemContainerStyle>
                        <Style TargetType="MenuItem">
                            <Setter Property="Header" Value="{Binding Header}" />
                            <Setter Property="Command" Value="{Binding Command}" />
                            <Setter Property="ItemsSource" Value="{Binding SubItems}" />
                            
                             <!-- Recursively style sub-items (Gamma 2.2, etc) -->
                             <!-- Since they are also ActionViewModels, this same style works if we set HierarchicalDataTemplate? 
                                  No, ItemContainerStyle applies to the *immediate* items. 
                                  For the sub-menu, the generated MenuItems need a style.
                                  We set ItemContainerStyle on the PARENT MenuItem?
                             -->
                             <Setter Property="ItemContainerStyle">
                                <Setter.Value>
                                    <Style TargetType="MenuItem">
                                        <Setter Property="Header" Value="{Binding Header}" />
                                        <Setter Property="Command" Value="{Binding Command}" />
                                    </Style>
                                </Setter.Value>
                             </Setter>
                        </Style>
                    </ContextMenu.ItemContainerStyle>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Grid>
</Window>
